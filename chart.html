<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chart</title>
</head>
<body>


    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/emn178/chartjs-plugin-labels/src/chartjs-plugin-labels.js"></script>
  <canvas id="myChart"></canvas>
    <script>
        
        document.addEventListener('DOMContentLoaded', function () {
    async function fetchHeadingData() {
        try {
            const response = await fetch('/heading');
            if (!response.ok) throw new Error('Network response was not ok');
            return await response.json();
        } catch (error) {
            console.error('There was a problem with the fetch operation:', error);
        }
    }

    fetchHeadingData().then(data => {
        if (data) {
            const ctx = document.getElementById("myChart").getContext("2d");
            new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: ['h1', 'h2', 'h3', 'h4', 'h5'],
                    datasets: [{
                        data: [data.h1 || 0, data.h2 || 0, data.h3 || 0, data.h4 || 0, data.h5 || 0],
                        backgroundColor: ['#FFCE56', '#36A2EB', '#FF6384', '#4BC0C0', '#9966FF']
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    plugins: {
                        tooltip: {
                            callbacks: {
                                label: function(tooltipItem) {
                                    return `${tooltipItem.label}: ${tooltipItem.raw}`;
                                }
                            }
                        },
                        legend: {
                            display: true,
                            position: 'top'
                        }
                    }
                }
            });
        }
    });
});

    </script>
</body>
</html>